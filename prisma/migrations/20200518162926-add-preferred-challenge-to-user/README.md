# Migration `20200518162926-add-preferred-challenge-to-user`

This migration has been generated by Marco Wettstein at 5/18/2020, 4:29:26 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."User" ADD COLUMN "preferredChallengeId" text   ;

ALTER TABLE "public"."User" ADD FOREIGN KEY ("preferredChallengeId")REFERENCES "public"."Challenge"("id") ON DELETE SET NULL  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200518161155-make-stuff-optional..20200518162926-add-preferred-challenge-to-user
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("POSTGRESQL_URL")
 }
 model Image {
   id        String   @default(uuid()) @id
@@ -93,8 +93,9 @@
   projects                        Project[]
   primaryTopicId                  String
   primaryTopic                    HackerTopic         @relation("primaryTopic", fields: [primaryTopicId], references: [id])
   teamChallengeVotes              TeamChallengeVote[]
+  usersThatPreferThisChallenge    User[]
 }
 model TeamChallengeVote {
   id          String    @default(uuid()) @id
@@ -150,8 +151,10 @@
   team                             Team?               @relation(fields: [teamId], references: [id])
   teamChallengeVotes               TeamChallengeVote[]
   devpostUrl                       String?
   isAnonymized                     Boolean             @default(false)
+  preferredChallengeId             String?
+  preferredChallenge               Challenge?          @relation(fields: [preferredChallengeId], references: [id])
 }
 enum ScheduleType {
   EXTERNAL_LINK
```


